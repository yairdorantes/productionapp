{"ast":null,"code":"var _jsxFileName = \"/home/yair/Desktop/Programming/what i delete form project/src/components/Posts.js\",\n    _s = $RefreshSig$();\n\nimport \"./styles/postCards.css\";\nimport { useContext, useEffect, useState } from \"react\";\nimport Heart from \"react-heart\";\nimport Loader from \"./Loader\";\nimport { helpHttp } from \"../helpers/helpHttp\";\nimport AuthContext from \"../context/AuthContext\";\nimport { Link } from \"react-router-dom\";\nimport MenuBar from \"./MenuBar\"; // import remarkGfm from \"remark-gfm\";\n\nimport { isMobile } from \"react-device-detect\";\nimport mySite from \"./Domain\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet url = `${mySite}postset/`;\nlet like = `${mySite}posts/`;\nconst params = {\n  method: \"GET\",\n  headers: {\n    accept: \"application/json\"\n  }\n};\n\nconst Posts = () => {\n  _s();\n\n  let {\n    user\n  } = useContext(AuthContext);\n  let likedPosts = `${mySite}posts/${user.user_id}`;\n  const [likes, setLikes] = useState([]);\n  const [posts, setPosts] = useState();\n\n  const fetchAPi = async () => {\n    const response = await fetch(url, params);\n    const responseJSON = await response.json();\n    setPosts(responseJSON); // console.log(responseJSON);\n  };\n\n  const getLikedPosts = async () => {\n    const response = await fetch(likedPosts, params);\n    const responseJSON = await response.json(); // setPosts(responseJSON);\n    // console.log(\"liked\", responseJSON);\n\n    responseJSON.posts_liked_by_user.map(post => likes.push(post.id));\n    setLikes([...likes]);\n  };\n\n  useEffect(() => {\n    fetchAPi();\n    getLikedPosts();\n  }, []);\n\n  const handleLike = post => {\n    let index = likes.findIndex(x => x === post.id);\n\n    if (index >= 0) {\n      likes.splice(index, 1);\n      post.likes_count -= 1;\n      let options = {\n        body: {\n          is_like: false,\n          id: post.id,\n          user_id: user.user_id\n        },\n        headers: {\n          \"content-type\": \"application/json\"\n        }\n      };\n      helpHttp().post(like, options).then(res => console.log(res.message));\n    } else {\n      likes.push(post.id);\n      post.likes_count += 1;\n      let options = {\n        body: {\n          is_like: true,\n          id: post.id,\n          user_id: user.user_id\n        },\n        headers: {\n          \"content-type\": \"application/json\"\n        }\n      };\n      helpHttp().post(like, options).then(res => console.log(res.message));\n    }\n\n    setLikes([...likes]); // console.log(likes);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-container-post\",\n    style: {\n      height: isMobile ? \"100%\" : \"100vh\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-posts\",\n      children: !posts ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this) : posts.map(post => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-post\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/postpage/${post.id}`,\n            className: \"link-post\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                backgroundImage: \"url(\" + post.image_src + \")\"\n              },\n              className: \"box-img-post-card\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                backgroundColor: `${post.categoria.color}`\n              },\n              className: \"section-post\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: post.categoria.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"container-card-text\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"title-post-card\",\n                children: post.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"like-post\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"heart-box\",\n              children: [likes.findIndex(x => x === post.id) >= 0 ? /*#__PURE__*/_jsxDEV(Heart, {\n                onClick: handleLike.bind(this, post),\n                style: {\n                  width: \"20px\"\n                },\n                isActive: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(Heart, {\n                onClick: handleLike.bind(this, post),\n                style: {\n                  width: \"20px\"\n                },\n                isActive: false\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"number-likes-post\",\n                children: [post.likes_count, \" Likes\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 17\n          }, this)]\n        }, post.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MenuBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Posts, \"TTSb8FkyjaFvD/edubBIGk8HNRk=\");\n\n_c = Posts;\nexport default Posts;\n\nvar _c;\n\n$RefreshReg$(_c, \"Posts\");","map":{"version":3,"names":["useContext","useEffect","useState","Heart","Loader","helpHttp","AuthContext","Link","MenuBar","isMobile","mySite","url","like","params","method","headers","accept","Posts","user","likedPosts","user_id","likes","setLikes","posts","setPosts","fetchAPi","response","fetch","responseJSON","json","getLikedPosts","posts_liked_by_user","map","post","push","id","handleLike","index","findIndex","x","splice","likes_count","options","body","is_like","then","res","console","log","message","height","backgroundImage","image_src","backgroundColor","categoria","color","name","title","bind","width"],"sources":["/home/yair/Desktop/Programming/what i delete form project/src/components/Posts.js"],"sourcesContent":["import \"./styles/postCards.css\";\nimport { useContext, useEffect, useState } from \"react\";\nimport Heart from \"react-heart\";\nimport Loader from \"./Loader\";\nimport { helpHttp } from \"../helpers/helpHttp\";\nimport AuthContext from \"../context/AuthContext\";\nimport { Link } from \"react-router-dom\";\nimport MenuBar from \"./MenuBar\";\n// import remarkGfm from \"remark-gfm\";\nimport { isMobile } from \"react-device-detect\";\nimport mySite from \"./Domain\";\n\nlet url = `${mySite}postset/`;\nlet like = `${mySite}posts/`;\n\nconst params = {\n  method: \"GET\",\n  headers: {\n    accept: \"application/json\",\n  },\n};\nconst Posts = () => {\n  let { user } = useContext(AuthContext);\n  let likedPosts = `${mySite}posts/${user.user_id}`;\n\n  const [likes, setLikes] = useState([]);\n\n  const [posts, setPosts] = useState();\n\n  const fetchAPi = async () => {\n    const response = await fetch(url, params);\n    const responseJSON = await response.json();\n    setPosts(responseJSON);\n    // console.log(responseJSON);\n  };\n\n  const getLikedPosts = async () => {\n    const response = await fetch(likedPosts, params);\n    const responseJSON = await response.json();\n    // setPosts(responseJSON);\n    // console.log(\"liked\", responseJSON);\n    responseJSON.posts_liked_by_user.map((post) => likes.push(post.id));\n    setLikes([...likes]);\n  };\n\n  useEffect(() => {\n    fetchAPi();\n    getLikedPosts();\n  }, []);\n\n  const handleLike = (post) => {\n    let index = likes.findIndex((x) => x === post.id);\n    if (index >= 0) {\n      likes.splice(index, 1);\n      post.likes_count -= 1;\n      let options = {\n        body: { is_like: false, id: post.id, user_id: user.user_id },\n        headers: { \"content-type\": \"application/json\" },\n      };\n      helpHttp()\n        .post(like, options)\n        .then((res) => console.log(res.message));\n    } else {\n      likes.push(post.id);\n      post.likes_count += 1;\n      let options = {\n        body: { is_like: true, id: post.id, user_id: user.user_id },\n        headers: { \"content-type\": \"application/json\" },\n      };\n      helpHttp()\n        .post(like, options)\n        .then((res) => console.log(res.message));\n    }\n    setLikes([...likes]);\n    // console.log(likes);\n  };\n\n  return (\n    <div\n      className=\"main-container-post\"\n      style={{ height: isMobile ? \"100%\" : \"100vh\" }}\n    >\n      <div className=\"container-posts\">\n        {!posts ? (\n          <Loader></Loader>\n        ) : (\n          posts.map((post) => {\n            return (\n              <div key={post.id} className=\"card-post\">\n                <Link to={`/postpage/${post.id}`} className=\"link-post\">\n                  <div\n                    style={{ backgroundImage: \"url(\" + post.image_src + \")\" }}\n                    className=\"box-img-post-card\"\n                  >\n                    {/* <img\n                      className=\"image-post\"\n                      src={post.image_src}\n                      alt=\"Avatar\"\n                      style={{ width: \"100%\", maxHeight: \"100px\" }}\n                    /> */}\n                  </div>\n                  <div\n                    style={{ backgroundColor: `${post.categoria.color}` }}\n                    className=\"section-post\"\n                  >\n                    <span>{post.categoria.name}</span>\n                  </div>\n                  <div className=\"container-card-text\">\n                    <h3 className=\"title-post-card\">{post.title}</h3>\n                  </div>\n                </Link>\n\n                <div className=\"like-post\">\n                  <div className=\"heart-box\">\n                    {likes.findIndex((x) => x === post.id) >= 0 ? (\n                      <Heart\n                        onClick={handleLike.bind(this, post)}\n                        style={{ width: \"20px\" }}\n                        isActive={true}\n                      />\n                    ) : (\n                      <Heart\n                        onClick={handleLike.bind(this, post)}\n                        style={{ width: \"20px\" }}\n                        isActive={false}\n                      />\n                    )}\n                    <div className=\"number-likes-post\">\n                      {post.likes_count} Likes\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })\n        )}\n      </div>\n      <MenuBar></MenuBar>\n    </div>\n  );\n};\n\nexport default Posts;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}