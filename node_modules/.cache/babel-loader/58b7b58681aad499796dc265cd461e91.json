{"ast":null,"code":"import _regeneratorRuntime from\"/home/yair/Desktop/xd/EnglishApp-main/duolingoDjango/project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/yair/Desktop/xd/EnglishApp-main/duolingoDjango/project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/yair/Desktop/xd/EnglishApp-main/duolingoDjango/project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{PayPalScriptProvider,PayPalButtons}from\"@paypal/react-paypal-js\";import{useContext,useState}from\"react\";import AuthContext from\"../context/AuthContext\";import{helpHttp}from\"../helpers/helpHttp\";import{jsx as _jsx}from\"react/jsx-runtime\";var PayPal=function PayPal(){var _useContext=useContext(AuthContext),user=_useContext.user;//const { product } = props;\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),paidFor=_useState4[0],setPaidFor=_useState4[1];var handleApprove=function handleApprove(orderId){setPaidFor(true);};if(paidFor){alert(\"thanks\");}if(error){alert(\"error\");}var test={describe:\"testing\",price:13.23};return/*#__PURE__*/_jsx(\"div\",{className:\"paypal-btn\",children:/*#__PURE__*/_jsx(PayPalButtons,{onClick:function onClick(data,actions){var hasAlreadyCourse=false;if(hasAlreadyCourse){setError(\"ya compraste\");return actions.reject();}else{return actions.resolve();}},createOrder:function createOrder(data,actions){return actions.order.create({purchase_units:[{description:test.describe,amount:{value:test.price}}]});},onApprove:/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data,action){var order;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return action.order.capture();case 2:order=_context.sent;console.log(\"order\",order);handleApprove(data.orderID);helpHttp().put(\"http://127.0.0.1:8000/api/makepremium/\".concat(user.user_id)).then(function(res){console.log(res);if(!res.err){console.log(\"no error\");//   setLoading(false);\n}else{console.log(res);// setError(res);\n}});//return action.order.capture();\ncase 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}(),onCancel:function onCancel(){// button.updateProps();\n},onError:function onError(err){setError(err);console.log(\"paypal error\");},style:{layout:\"horizontal\",color:\"gold\",shape:\"pill\"}})});};export default PayPal;","map":{"version":3,"names":["PayPalScriptProvider","PayPalButtons","useContext","useState","AuthContext","helpHttp","PayPal","user","error","setError","paidFor","setPaidFor","handleApprove","orderId","alert","test","describe","price","data","actions","hasAlreadyCourse","reject","resolve","order","create","purchase_units","description","amount","value","action","capture","console","log","orderID","put","user_id","then","res","err","layout","color","shape"],"sources":["/home/yair/Desktop/xd/EnglishApp-main/duolingoDjango/project/src/components/PayPal.js"],"sourcesContent":["import { PayPalScriptProvider, PayPalButtons } from \"@paypal/react-paypal-js\";\nimport { useContext, useState } from \"react\";\nimport AuthContext from \"../context/AuthContext\";\nimport { helpHttp } from \"../helpers/helpHttp\";\nconst PayPal = () => {\n  let { user } = useContext(AuthContext);\n\n  //const { product } = props;\n  const [error, setError] = useState(null);\n  const [paidFor, setPaidFor] = useState(false);\n\n  const handleApprove = (orderId) => {\n    setPaidFor(true);\n  };\n\n  if (paidFor) {\n    alert(\"thanks\");\n  }\n  if (error) {\n    alert(\"error\");\n  }\n\n  const test = {\n    describe: \"testing\",\n    price: 13.23,\n  };\n  return (\n    <div className=\"paypal-btn\">\n      <PayPalButtons\n        onClick={(data, actions) => {\n          const hasAlreadyCourse = false;\n          if (hasAlreadyCourse) {\n            setError(\"ya compraste\");\n            return actions.reject();\n          } else {\n            return actions.resolve();\n          }\n        }}\n        createOrder={(data, actions) => {\n          return actions.order.create({\n            purchase_units: [\n              {\n                description: test.describe,\n                amount: {\n                  value: test.price,\n                },\n              },\n            ],\n          });\n        }}\n        onApprove={async (data, action) => {\n          const order = await action.order.capture();\n          console.log(\"order\", order);\n          handleApprove(data.orderID);\n\n          helpHttp()\n            .put(`http://127.0.0.1:8000/api/makepremium/${user.user_id}`)\n            .then((res) => {\n              console.log(res);\n              if (!res.err) {\n                console.log(\"no error\");\n                //   setLoading(false);\n              } else {\n                console.log(res);\n                // setError(res);\n              }\n            });\n          //return action.order.capture();\n        }}\n        onCancel={() => {\n          // button.updateProps();\n        }}\n        onError={(err) => {\n          setError(err);\n          console.log(\"paypal error\");\n        }}\n        style={{\n          layout: \"horizontal\",\n          color: \"gold\",\n          shape: \"pill\",\n        }}\n      />\n    </div>\n  );\n};\n\nexport default PayPal;\n"],"mappings":"scAAA,OAASA,oBAAT,CAA+BC,aAA/B,KAAoD,yBAApD,CACA,OAASC,UAAT,CAAqBC,QAArB,KAAqC,OAArC,CACA,MAAOC,YAAP,KAAwB,wBAAxB,CACA,OAASC,QAAT,KAAyB,qBAAzB,C,2CACA,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAM,CACnB,gBAAeJ,UAAU,CAACE,WAAD,CAAzB,CAAMG,IAAN,aAAMA,IAAN,CAEA;AACA,cAA0BJ,QAAQ,CAAC,IAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eACA,eAA8BN,QAAQ,CAAC,KAAD,CAAtC,yCAAOO,OAAP,eAAgBC,UAAhB,eAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,CAACC,OAAD,CAAa,CACjCF,UAAU,CAAC,IAAD,CAAV,CACD,CAFD,CAIA,GAAID,OAAJ,CAAa,CACXI,KAAK,CAAC,QAAD,CAAL,CACD,CACD,GAAIN,KAAJ,CAAW,CACTM,KAAK,CAAC,OAAD,CAAL,CACD,CAED,GAAMC,KAAI,CAAG,CACXC,QAAQ,CAAE,SADC,CAEXC,KAAK,CAAE,KAFI,CAAb,CAIA,mBACE,YAAK,SAAS,CAAC,YAAf,uBACE,KAAC,aAAD,EACE,OAAO,CAAE,iBAACC,IAAD,CAAOC,OAAP,CAAmB,CAC1B,GAAMC,iBAAgB,CAAG,KAAzB,CACA,GAAIA,gBAAJ,CAAsB,CACpBX,QAAQ,CAAC,cAAD,CAAR,CACA,MAAOU,QAAO,CAACE,MAAR,EAAP,CACD,CAHD,IAGO,CACL,MAAOF,QAAO,CAACG,OAAR,EAAP,CACD,CACF,CATH,CAUE,WAAW,CAAE,qBAACJ,IAAD,CAAOC,OAAP,CAAmB,CAC9B,MAAOA,QAAO,CAACI,KAAR,CAAcC,MAAd,CAAqB,CAC1BC,cAAc,CAAE,CACd,CACEC,WAAW,CAAEX,IAAI,CAACC,QADpB,CAEEW,MAAM,CAAE,CACNC,KAAK,CAAEb,IAAI,CAACE,KADN,CAFV,CADc,CADU,CAArB,CAAP,CAUD,CArBH,CAsBE,SAAS,4FAAE,iBAAOC,IAAP,CAAaW,MAAb,oJACWA,OAAM,CAACN,KAAP,CAAaO,OAAb,EADX,QACHP,KADG,eAETQ,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAqBT,KAArB,EACAX,aAAa,CAACM,IAAI,CAACe,OAAN,CAAb,CAEA5B,QAAQ,GACL6B,GADH,iDACgD3B,IAAI,CAAC4B,OADrD,GAEGC,IAFH,CAEQ,SAACC,GAAD,CAAS,CACbN,OAAO,CAACC,GAAR,CAAYK,GAAZ,EACA,GAAI,CAACA,GAAG,CAACC,GAAT,CAAc,CACZP,OAAO,CAACC,GAAR,CAAY,UAAZ,EACA;AACD,CAHD,IAGO,CACLD,OAAO,CAACC,GAAR,CAAYK,GAAZ,EACA;AACD,CACF,CAXH,EAYA;AAjBS,sDAAF,kEAtBX,CAyCE,QAAQ,CAAE,mBAAM,CACd;AACD,CA3CH,CA4CE,OAAO,CAAE,iBAACC,GAAD,CAAS,CAChB7B,QAAQ,CAAC6B,GAAD,CAAR,CACAP,OAAO,CAACC,GAAR,CAAY,cAAZ,EACD,CA/CH,CAgDE,KAAK,CAAE,CACLO,MAAM,CAAE,YADH,CAELC,KAAK,CAAE,MAFF,CAGLC,KAAK,CAAE,MAHF,CAhDT,EADF,EADF,CA0DD,CAhFD,CAkFA,cAAenC,OAAf"},"metadata":{},"sourceType":"module"}