{"ast":null,"code":"var _jsxFileName = \"/home/yair/Desktop/project/src/components/Shorts.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport Loader from \"./Loader\";\nimport { InView } from \"react-intersection-observer\";\nimport heart from \"../media/heart.png\";\nimport \"swiper/css\";\nimport { Pagination, Mousewheel } from \"swiper\";\nimport { Swiper, SwiperSlide, useSwiper } from \"swiper/react\";\nimport Yair from \"./Yair\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Shorts = () => {\n  _s();\n\n  const [swiper, setSwiper] = useState(null);\n  const [shorts, setShorts] = useState();\n  const [currentVideo, setCurrentVideo] = useState(); ///const [isplay, setIsplay] = useState(true);\n\n  const fetchAPi = async () => {\n    const urlShorts = \"http://127.0.0.1:8000/api/shortset/\";\n    const params = {\n      method: \"GET\",\n      headers: {\n        accept: \"application/json\"\n      }\n    };\n    const response = await fetch(urlShorts, params);\n    const responseJSON = await response.json();\n    console.log(responseJSON);\n    setShorts(responseJSON);\n  };\n\n  useEffect(() => {\n    fetchAPi();\n  }, []);\n\n  const handlePlay = e => {\n    let video = e.target; // console.log(video);\n\n    if (video.paused) {\n      video.play();\n    } else {\n      video.pause();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Swiper, {\n      mousewheel: true,\n      className: \"swiper-shorts\",\n      direction: \"vertical\",\n      pagination: {\n        clickable: true\n      },\n      modules: [Pagination, Mousewheel],\n      spaceBetween: 100,\n      slidesPerView: 1,\n      children: !shorts ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this) : shorts.map((short, key) => {\n        return /*#__PURE__*/_jsxDEV(SwiperSlide, {\n          children: [/*#__PURE__*/_jsxDEV(InView, {\n            as: \"div\",\n            onChange: (inView, entry) => {\n              // console.log(inView);\n              var video = entry.target.querySelector(\"video\");\n              setCurrentVideo(video);\n\n              video.ontimeupdate = function () {\n                console.log(video.currentTime);\n                var videoTime = video.currentTime;\n              }; // video.ontimeupdate = function () {\n              //   // shorts[idVideo].sub_card_list.map((subcard) => {\n              //   // });\n              //   console.log(video.currentTime);\n              //   if (video.currentTime > 5) {\n              //     console.log(\"yeeeeesssss\");\n              //     swiper.slideNext();\n              //   }\n              // };\n\n\n              if (inView) {\n                let idVideo = video.id; //    setCurrentVideo(video);\n                // video.load();\n\n                video.play().catch(e => {\n                  console.log(e);\n                }); //  console.log(shorts);\n                // shorts[video.id].sub_card_list.map((subcard) => {\n                //   console.log(subcard.skip_to);\n                // });\n              } else {\n                video.pause();\n              }\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shorts-container\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"short-video\",\n                children: /*#__PURE__*/_jsxDEV(\"video\", {\n                  id: short.id - 1 // inView={inView}\n                  //  muted={false}\n                  ,\n                  onClick: handlePlay,\n                  loop: true,\n                  src: short.short_url // autoPlay\n\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Swiper, {\n            \"data-id\": key,\n            modules: [Pagination],\n            spaceBetween: 10,\n            slidesPerView: 1,\n            onSwiper: setSwiper,\n            children: short.sub_card_list.map((subCard, index) => {\n              // console.log(subCard);\n              return /*#__PURE__*/_jsxDEV(SwiperSlide, {\n                className: \"swiper-slide-subtitles\",\n                children: [/*#__PURE__*/_jsxDEV(InView, {\n                  onChange: (inView, entry2) => {\n                    if (inView) {\n                      let video = entry2.target.parentElement.parentElement.parentElement.parentElement.querySelector(\"video\");\n                      let specificSecond = subCard.skip_to;\n                      video.currentTime = specificSecond;\n                    }\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"short-info\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"sentence-short\",\n                      children: subCard.sentence\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 151,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"sentence-meaning-short\",\n                      children: subCard.meaning\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 152,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: swiper.slideTo(1)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Yair, {\n                  video: currentVideo\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 25\n                }, this)]\n              }, subCard.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container-likes-short\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn-like-short\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: heart,\n                alt: \"likes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"num-likes-short\",\n                children: short.likes\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 17\n          }, this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(Shorts, \"tmiQkwx/ScU70rc9/na8gxSYmY4=\");\n\n_c = Shorts;\nexport default Shorts;\n\nvar _c;\n\n$RefreshReg$(_c, \"Shorts\");","map":{"version":3,"names":["useEffect","useState","Loader","InView","heart","Pagination","Mousewheel","Swiper","SwiperSlide","useSwiper","Yair","Shorts","swiper","setSwiper","shorts","setShorts","currentVideo","setCurrentVideo","fetchAPi","urlShorts","params","method","headers","accept","response","fetch","responseJSON","json","console","log","handlePlay","e","video","target","paused","play","pause","clickable","map","short","key","inView","entry","querySelector","ontimeupdate","currentTime","videoTime","idVideo","id","catch","short_url","sub_card_list","subCard","index","entry2","parentElement","specificSecond","skip_to","sentence","meaning","slideTo","likes"],"sources":["/home/yair/Desktop/project/src/components/Shorts.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport Loader from \"./Loader\";\nimport { InView } from \"react-intersection-observer\";\nimport heart from \"../media/heart.png\";\nimport \"swiper/css\";\n\nimport { Pagination, Mousewheel } from \"swiper\";\nimport { Swiper, SwiperSlide, useSwiper } from \"swiper/react\";\nimport Yair from \"./Yair\";\n\nconst Shorts = () => {\n  const [swiper, setSwiper] = useState(null);\n\n  const [shorts, setShorts] = useState();\n  const [currentVideo, setCurrentVideo] = useState();\n  ///const [isplay, setIsplay] = useState(true);\n\n  const fetchAPi = async () => {\n    const urlShorts = \"http://127.0.0.1:8000/api/shortset/\";\n    const params = {\n      method: \"GET\",\n      headers: {\n        accept: \"application/json\",\n      },\n    };\n    const response = await fetch(urlShorts, params);\n    const responseJSON = await response.json();\n    console.log(responseJSON);\n    setShorts(responseJSON);\n  };\n\n  useEffect(() => {\n    fetchAPi();\n  }, []);\n\n  const handlePlay = (e) => {\n    let video = e.target;\n    // console.log(video);\n    if (video.paused) {\n      video.play();\n    } else {\n      video.pause();\n    }\n  };\n\n  return (\n    <>\n      <Swiper\n        mousewheel={true}\n        className=\"swiper-shorts\"\n        direction={\"vertical\"}\n        pagination={{\n          clickable: true,\n        }}\n        modules={[Pagination, Mousewheel]}\n        spaceBetween={100}\n        slidesPerView={1}\n      >\n        {!shorts ? (\n          <Loader></Loader>\n        ) : (\n          shorts.map((short, key) => {\n            return (\n              <SwiperSlide key={key}>\n                <InView\n                  as=\"div\"\n                  onChange={(inView, entry) => {\n                    // console.log(inView);\n                    var video = entry.target.querySelector(\"video\");\n                    setCurrentVideo(video);\n\n                    video.ontimeupdate = function () {\n                      console.log(video.currentTime);\n                      var videoTime = video.currentTime;\n                    };\n\n                    // video.ontimeupdate = function () {\n                    //   // shorts[idVideo].sub_card_list.map((subcard) => {\n                    //   // });\n                    //   console.log(video.currentTime);\n                    //   if (video.currentTime > 5) {\n                    //     console.log(\"yeeeeesssss\");\n\n                    //     swiper.slideNext();\n                    //   }\n                    // };\n                    if (inView) {\n                      let idVideo = video.id;\n                      //    setCurrentVideo(video);\n                      // video.load();\n                      video.play().catch((e) => {\n                        console.log(e);\n                      });\n\n                      //  console.log(shorts);\n\n                      // shorts[video.id].sub_card_list.map((subcard) => {\n                      //   console.log(subcard.skip_to);\n                      // });\n                    } else {\n                      video.pause();\n                    }\n                  }}\n                >\n                  <div className=\"shorts-container\">\n                    <div className=\"short-video\">\n                      <video\n                        id={short.id - 1}\n                        // inView={inView}\n                        //  muted={false}\n                        onClick={handlePlay}\n                        loop\n                        src={short.short_url}\n                        // autoPlay\n                      ></video>\n                    </div>\n                  </div>\n                </InView>\n\n                <Swiper\n                  data-id={key}\n                  modules={[Pagination]}\n                  spaceBetween={10}\n                  slidesPerView={1}\n                  onSwiper={setSwiper}\n                >\n                  {/*in every swiperslide data-swiper-autoplay=\"2000\"*/}\n                  {short.sub_card_list.map((subCard, index) => {\n                    // console.log(subCard);\n                    return (\n                      <SwiperSlide\n                        className=\"swiper-slide-subtitles\"\n                        key={subCard.id}\n                        // data-swiper-autoplay=\"1000\"\n                      >\n                        <InView\n                          onChange={(inView, entry2) => {\n                            if (inView) {\n                              let video =\n                                entry2.target.parentElement.parentElement.parentElement.parentElement.querySelector(\n                                  \"video\"\n                                );\n\n                              let specificSecond = subCard.skip_to;\n\n                              video.currentTime = specificSecond;\n                            }\n                          }}\n                        >\n                          <div className=\"short-info\">\n                            <p className=\"sentence-short\">{subCard.sentence}</p>\n                            <p className=\"sentence-meaning-short\">\n                              {subCard.meaning}\n                            </p>\n                          </div>\n                        </InView>\n                        <button onClick={swiper.slideTo(1)}></button>\n\n                        <Yair video={currentVideo}></Yair>\n                      </SwiperSlide>\n                    );\n                  })}\n                </Swiper>\n                <div className=\"container-likes-short\">\n                  <button className=\"btn-like-short\">\n                    <img src={heart} alt=\"likes\" />\n                    <div className=\"num-likes-short\">{short.likes}</div>\n                  </button>\n                </div>\n              </SwiperSlide>\n            );\n          })\n        )}\n      </Swiper>\n    </>\n  );\n};\n\nexport default Shorts;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}