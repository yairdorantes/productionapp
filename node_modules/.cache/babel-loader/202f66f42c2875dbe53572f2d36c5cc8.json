{"ast":null,"code":"var _jsxFileName = \"/home/yair/Desktop/project/src/components/PayPal.js\",\n    _s = $RefreshSig$();\n\nimport { PayPalScriptProvider, PayPalButtons } from \"@paypal/react-paypal-js\";\nimport { useContext, useState } from \"react\";\nimport AuthContext from \"../context/AuthContext\";\nimport { helpHttp } from \"../helpers/helpHttp\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PayPal = () => {\n  _s();\n\n  let {\n    user\n  } = useContext(AuthContext); //const { product } = props;\n\n  const [error, setError] = useState(null);\n  const [paidFor, setPaidFor] = useState(false);\n\n  const handleApprove = orderId => {\n    setPaidFor(true);\n  };\n\n  if (paidFor) {\n    alert(\"thanks\");\n  }\n\n  if (error) {\n    alert(\"error\");\n  }\n\n  const test = {\n    describe: \"testing\",\n    price: 0.05\n  };\n  return /*#__PURE__*/_jsxDEV(PayPalButtons, {\n    onClick: (data, actions) => {\n      const hasAlreadyCourse = false;\n\n      if (hasAlreadyCourse) {\n        setError(\"ya compraste\");\n        return actions.reject();\n      } else {\n        return actions.resolve();\n      }\n    },\n    createOrder: (data, actions) => {\n      return actions.order.create({\n        purchase_units: [{\n          description: test.describe,\n          amount: {\n            value: test.price\n          }\n        }]\n      });\n    },\n    onApprove: async (data, action) => {\n      const order = await action.order.capture();\n      console.log(\"order\", order);\n      handleApprove(data.orderID);\n      helpHttp().put(`http://127.0.0.1:8000/api/makepremium/${user.user_id}`).then(res => {\n        console.log(res);\n\n        if (!res.err) {\n          console.log(\"no error\"); //   setLoading(false);\n        } else {\n          console.log(res); // setError(res);\n        }\n      });\n    },\n    onCancel: () => {},\n    onError: err => {\n      setError(err);\n      console.log(\"paypal error\");\n    },\n    style: {\n      layout: \"horizontal\",\n      color: \"gold\"\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PayPal, \"OqbMWDxBBlG0HAN2dfpqswIYJMo=\");\n\n_c = PayPal;\nexport default PayPal;\n\nvar _c;\n\n$RefreshReg$(_c, \"PayPal\");","map":{"version":3,"names":["PayPalScriptProvider","PayPalButtons","useContext","useState","AuthContext","helpHttp","PayPal","user","error","setError","paidFor","setPaidFor","handleApprove","orderId","alert","test","describe","price","data","actions","hasAlreadyCourse","reject","resolve","order","create","purchase_units","description","amount","value","action","capture","console","log","orderID","put","user_id","then","res","err","layout","color"],"sources":["/home/yair/Desktop/project/src/components/PayPal.js"],"sourcesContent":["import { PayPalScriptProvider, PayPalButtons } from \"@paypal/react-paypal-js\";\nimport { useContext, useState } from \"react\";\nimport AuthContext from \"../context/AuthContext\";\nimport { helpHttp } from \"../helpers/helpHttp\";\nconst PayPal = () => {\n  let { user } = useContext(AuthContext);\n\n  //const { product } = props;\n  const [error, setError] = useState(null);\n  const [paidFor, setPaidFor] = useState(false);\n\n  const handleApprove = (orderId) => {\n    setPaidFor(true);\n  };\n\n  if (paidFor) {\n    alert(\"thanks\");\n  }\n  if (error) {\n    alert(\"error\");\n  }\n\n  const test = {\n    describe: \"testing\",\n    price: 0.05,\n  };\n  return (\n    <PayPalButtons\n      onClick={(data, actions) => {\n        const hasAlreadyCourse = false;\n        if (hasAlreadyCourse) {\n          setError(\"ya compraste\");\n          return actions.reject();\n        } else {\n          return actions.resolve();\n        }\n      }}\n      createOrder={(data, actions) => {\n        return actions.order.create({\n          purchase_units: [\n            {\n              description: test.describe,\n              amount: {\n                value: test.price,\n              },\n            },\n          ],\n        });\n      }}\n      onApprove={async (data, action) => {\n        const order = await action.order.capture();\n        console.log(\"order\", order);\n        handleApprove(data.orderID);\n\n        helpHttp()\n          .put(`http://127.0.0.1:8000/api/makepremium/${user.user_id}`)\n          .then((res) => {\n            console.log(res);\n\n            if (!res.err) {\n              console.log(\"no error\");\n              //   setLoading(false);\n            } else {\n              console.log(res);\n              // setError(res);\n            }\n          });\n      }}\n      onCancel={() => {}}\n      onError={(err) => {\n        setError(err);\n        console.log(\"paypal error\");\n      }}\n      style={{ layout: \"horizontal\", color: \"gold\" }}\n    />\n  );\n};\n\nexport default PayPal;\n"],"mappings":";;;AAAA,SAASA,oBAAT,EAA+BC,aAA/B,QAAoD,yBAApD;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,OAArC;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,SAASC,QAAT,QAAyB,qBAAzB;;;AACA,MAAMC,MAAM,GAAG,MAAM;EAAA;;EACnB,IAAI;IAAEC;EAAF,IAAWL,UAAU,CAACE,WAAD,CAAzB,CADmB,CAGnB;;EACA,MAAM,CAACI,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC,IAAD,CAAlC;EACA,MAAM,CAACO,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC,KAAD,CAAtC;;EAEA,MAAMS,aAAa,GAAIC,OAAD,IAAa;IACjCF,UAAU,CAAC,IAAD,CAAV;EACD,CAFD;;EAIA,IAAID,OAAJ,EAAa;IACXI,KAAK,CAAC,QAAD,CAAL;EACD;;EACD,IAAIN,KAAJ,EAAW;IACTM,KAAK,CAAC,OAAD,CAAL;EACD;;EAED,MAAMC,IAAI,GAAG;IACXC,QAAQ,EAAE,SADC;IAEXC,KAAK,EAAE;EAFI,CAAb;EAIA,oBACE,QAAC,aAAD;IACE,OAAO,EAAE,CAACC,IAAD,EAAOC,OAAP,KAAmB;MAC1B,MAAMC,gBAAgB,GAAG,KAAzB;;MACA,IAAIA,gBAAJ,EAAsB;QACpBX,QAAQ,CAAC,cAAD,CAAR;QACA,OAAOU,OAAO,CAACE,MAAR,EAAP;MACD,CAHD,MAGO;QACL,OAAOF,OAAO,CAACG,OAAR,EAAP;MACD;IACF,CATH;IAUE,WAAW,EAAE,CAACJ,IAAD,EAAOC,OAAP,KAAmB;MAC9B,OAAOA,OAAO,CAACI,KAAR,CAAcC,MAAd,CAAqB;QAC1BC,cAAc,EAAE,CACd;UACEC,WAAW,EAAEX,IAAI,CAACC,QADpB;UAEEW,MAAM,EAAE;YACNC,KAAK,EAAEb,IAAI,CAACE;UADN;QAFV,CADc;MADU,CAArB,CAAP;IAUD,CArBH;IAsBE,SAAS,EAAE,OAAOC,IAAP,EAAaW,MAAb,KAAwB;MACjC,MAAMN,KAAK,GAAG,MAAMM,MAAM,CAACN,KAAP,CAAaO,OAAb,EAApB;MACAC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBT,KAArB;MACAX,aAAa,CAACM,IAAI,CAACe,OAAN,CAAb;MAEA5B,QAAQ,GACL6B,GADH,CACQ,yCAAwC3B,IAAI,CAAC4B,OAAQ,EAD7D,EAEGC,IAFH,CAESC,GAAD,IAAS;QACbN,OAAO,CAACC,GAAR,CAAYK,GAAZ;;QAEA,IAAI,CAACA,GAAG,CAACC,GAAT,EAAc;UACZP,OAAO,CAACC,GAAR,CAAY,UAAZ,EADY,CAEZ;QACD,CAHD,MAGO;UACLD,OAAO,CAACC,GAAR,CAAYK,GAAZ,EADK,CAEL;QACD;MACF,CAZH;IAaD,CAxCH;IAyCE,QAAQ,EAAE,MAAM,CAAE,CAzCpB;IA0CE,OAAO,EAAGC,GAAD,IAAS;MAChB7B,QAAQ,CAAC6B,GAAD,CAAR;MACAP,OAAO,CAACC,GAAR,CAAY,cAAZ;IACD,CA7CH;IA8CE,KAAK,EAAE;MAAEO,MAAM,EAAE,YAAV;MAAwBC,KAAK,EAAE;IAA/B;EA9CT;IAAA;IAAA;IAAA;EAAA,QADF;AAkDD,CAxED;;GAAMlC,M;;KAAAA,M;AA0EN,eAAeA,MAAf"},"metadata":{},"sourceType":"module"}